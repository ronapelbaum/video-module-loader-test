<html>
<head>
    <title>ModuleLoader Test 1</title>
</head>
<body>
    <h2>Test 1: <strong id=time></strong></h2>
    <p>
        video app code <strong>inside iframe</strong>.
        <br/> 
        iframe main code is written to iframe document using <code>iframe.contentDocument.write()</code>
    </p>
    <div id="player-wrapper"></div>
    
    <script type="text/javascript" src="../module-loader.js"></script>
    <script type="text/javascript" src="../performance-test.js"></script>
    <link href="../video-app.js" rel="preload" as="script">
    <script type="text/javascript">
        const playerWrapper = document.getElementById('player-wrapper');
        const iframeScriptUrl = '../video-app.js';
        
        function renderTime (time) {
            document.getElementById('time').innerHTML = time + 'ms';
        }
        
        function loadModuleAsync(){
            return new Promise(function(resolve, reject) {
                loadModule(playerWrapper, {
                    mainCallback: 'createPlayer',
                    mainInIframe: true,
                    writeHtml: true,
                    scriptUrl: iframeScriptUrl
                }, resolve);
            });
        }
        
        performanceTest('test-1', loadModuleAsync).then(renderTime);
        // multiPerformanceTest('test-a', loadModuleAsync, 5).then(renderTime);
    </script>
</body>
</html>